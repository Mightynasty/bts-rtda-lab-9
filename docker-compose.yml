version: '3'

services:
    spark:
        build: .
        container_name: spark
        expose:
            - 4040
        ports:
            - 4040:4040
        environment:
            SPARK_PUBLIC_DNS: spark
        networks:
            - lampda-network

    elasticsearch:
        image: docker.elastic.co/elasticsearch/elasticsearch:7.1.1
        container_name: elasticsearch
        ports:
          - "9200:9200"
        environment:
            - "cluster.initial_master_nodes=elasticsearch"
            - "node.name=elasticsearch"
        networks:
            - lampda-network

    kibana:
        image: docker.elastic.co/kibana/kibana:7.1.1
        container_name: kibana
        environment:
            - "elasticsearch.url=http://elasticsearch:9200 "
        networks:
            - lampda-network
        depends_on:
            - elasticsearch
        ports:
          - "5601:5601"

networks:
    lampda-network:
        driver: bridge